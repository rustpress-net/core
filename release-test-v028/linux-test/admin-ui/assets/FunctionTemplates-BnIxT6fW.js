import{aF as E,r,j as e,L as U,y as q,q as n,w as D,a1 as v,b as I,N as M,aD as P,V as C,aE as z,n as O,I as $,U as B,i as k,R as G,a2 as H}from"./index-rtSsgAPH.js";import{R as N}from"./refresh-cw-BVqTSYJG.js";import{A as J}from"./arrow-left-DINobE5A.js";import{F as Q}from"./filter-DMMFr9fY.js";import{P as V}from"./play-zm4iwQ4C.js";import{C as w}from"./chart-no-axes-column-jbeBZY5I.js";import{A as W}from"./archive-CsLb17SN.js";import{M as Z}from"./message-circle-Cp01-Uvo.js";import{F as h}from"./file-code-CGzu3lUy.js";import{T as K}from"./terminal-C4xcTlr6.js";const f={content:e.jsx(h,{className:"w-5 h-5"}),seo:e.jsx(w,{className:"w-5 h-5"}),users:e.jsx(B,{className:"w-5 h-5"}),comments:e.jsx(Z,{className:"w-5 h-5"}),media:e.jsx($,{className:"w-5 h-5"}),backup:e.jsx(W,{className:"w-5 h-5"}),maintenance:e.jsx(O,{className:"w-5 h-5"}),performance:e.jsx(v,{className:"w-5 h-5"}),analytics:e.jsx(w,{className:"w-5 h-5"}),security:e.jsx(z,{className:"w-5 h-5"}),integrations:e.jsx(C,{className:"w-5 h-5"}),notifications:e.jsx(P,{className:"w-5 h-5"}),ecommerce:e.jsx(M,{className:"w-5 h-5"}),scheduler:e.jsx(I,{className:"w-5 h-5"})},X={javascript:e.jsx(h,{className:"w-4 h-4 text-yellow-500"}),typescript:e.jsx(h,{className:"w-4 h-4 text-blue-500"}),sql:e.jsx(H,{className:"w-4 h-4 text-green-500"}),http_webhook:e.jsx(C,{className:"w-4 h-4 text-purple-500"}),email:e.jsx(G,{className:"w-4 h-4 text-red-500"}),slack:e.jsx(k,{className:"w-4 h-4 text-pink-500"}),discord:e.jsx(k,{className:"w-4 h-4 text-indigo-500"}),lua:e.jsx(K,{className:"w-4 h-4 text-cyan-500"})},Y={content:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",seo:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",users:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",comments:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",media:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400",backup:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",maintenance:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",performance:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",analytics:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400",security:"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-400",integrations:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",notifications:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",ecommerce:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",scheduler:"bg-violet-100 text-violet-800 dark:bg-violet-900/30 dark:text-violet-400"};function xe(){const S=E(),[l,F]=r.useState([]),[T,A]=r.useState(!0),[x,p]=r.useState(""),[i,d]=r.useState(""),[g,y]=r.useState(""),[c,L]=r.useState(!1),[b,u]=r.useState(null);r.useEffect(()=>{R()},[]);const R=async()=>{try{const s=await(await fetch("/api/admin/functions/templates")).json();s.success&&F(s.data)}catch(a){console.error("Failed to fetch templates:",a)}finally{A(!1)}},_=async a=>{u(a);try{const t=await(await fetch(`/api/admin/functions/templates/${a}/use`,{method:"POST"})).json();t.success?S(`/functions/${t.data.id}/edit`):alert(t.error||"Failed to use template")}catch(s){console.error("Failed to use template:",s),alert("Failed to use template")}finally{u(null)}},m=Array.from(new Set(l.map(a=>a.category))).sort(),j=l.filter(a=>{const s=a.name.toLowerCase().includes(x.toLowerCase())||a.description.toLowerCase().includes(x.toLowerCase()),t=!i||a.category===i,o=!g||a.runtime===g;return s&&t&&o}).reduce((a,s)=>(a[s.category]||(a[s.category]=[]),a[s.category].push(s),a),{});return T?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(N,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{to:"/functions",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(J,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Function Templates"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[l.length," ready-to-use templates"]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:x,onChange:a=>p(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("button",{onClick:()=>L(!c),className:n("btn btn-secondary flex items-center gap-2",c&&"bg-gray-100 dark:bg-gray-700"),children:[e.jsx(Q,{className:"w-4 h-4"}),"Filters",e.jsx(D,{className:n("w-4 h-4 transition-transform",c&&"rotate-180")})]})]}),c&&e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("select",{value:i,onChange:a=>d(a.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Categories"}),m.map(a=>e.jsx("option",{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))]}),e.jsxs("select",{value:g,onChange:a=>y(a.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"All Runtimes"}),e.jsx("option",{value:"javascript",children:"JavaScript"}),e.jsx("option",{value:"typescript",children:"TypeScript"}),e.jsx("option",{value:"sql",children:"SQL"}),e.jsx("option",{value:"http_webhook",children:"HTTP Webhook"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"slack",children:"Slack"}),e.jsx("option",{value:"discord",children:"Discord"})]}),e.jsx("button",{onClick:()=>{d(""),y(""),p("")},className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear filters"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>d(""),className:n("px-3 py-1.5 text-sm rounded-lg transition-colors",i?"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700":"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400"),children:"All"}),m.map(a=>e.jsxs("button",{onClick:()=>d(a===i?"":a),className:n("flex items-center gap-1.5 px-3 py-1.5 text-sm rounded-lg transition-colors",a===i?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[f[a],a.charAt(0).toUpperCase()+a.slice(1)]},a))]}),Object.keys(j).length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-8 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900 dark:text-white",children:"No templates found"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Try adjusting your search or filters."})]}):e.jsx("div",{className:"space-y-8",children:Object.entries(j).sort().map(([a,s])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:n("p-2 rounded-lg",Y[a]),children:f[a]}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:a}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.length," templates)"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:border-primary-300 dark:hover:border-primary-600 transition-colors",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t.description})]})}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[X[t.runtime],e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:t.runtime.replace("_"," ")})]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[t.trigger_events.slice(0,2).map(o=>e.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:o},o)),t.trigger_events.length>2&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded",children:["+",t.trigger_events.length-2," more"]})]}),e.jsx("button",{onClick:()=>_(t.slug),disabled:b===t.slug,className:"w-full btn btn-primary btn-sm flex items-center justify-center gap-2",children:b===t.slug?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-4 h-4"}),"Use Template"]})})]},t.slug))})]},a))}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Templates"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:m.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Categories"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:new Set(l.map(a=>a.runtime)).size}),e.jsx("p",{className:"text-sm text-gray-500",children:"Runtimes"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:l.reduce((a,s)=>a+s.trigger_events.length,0)}),e.jsx("p",{className:"text-sm text-gray-500",children:"Event Triggers"})]})]})})]})}export{xe as default};
