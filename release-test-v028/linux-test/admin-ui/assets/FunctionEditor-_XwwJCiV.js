import{aG as H,aF as J,r as d,j as e,L as K,q as o,k as Q,ap as G,X as w,aa as V,a1 as X,n as Z,a2 as ee,V as te,R as ae,i as C,y as re,w as se,D as de}from"./index-rtSsgAPH.js";import{A as ne}from"./arrow-left-DINobE5A.js";import{P as ie}from"./play-zm4iwQ4C.js";import{S as oe}from"./save-4rnUEB8I.js";import{F as y}from"./file-code-CGzu3lUy.js";import{T as le}from"./terminal-C4xcTlr6.js";const ce=[{value:"after",label:"After Event",description:"Execute after the action completes (notifications, logging)"},{value:"before",label:"Before Event",description:"Execute before the action (can modify data or cancel)"},{value:"both",label:"Both",description:"Execute both before and after the action"}],me=[{value:"javascript",label:"JavaScript",icon:y,color:"text-yellow-500"},{value:"typescript",label:"TypeScript",icon:y,color:"text-blue-500"},{value:"rust",label:"Rust",icon:y,color:"text-orange-500"},{value:"sql",label:"SQL",icon:ee,color:"text-green-500"},{value:"http_webhook",label:"HTTP Webhook",icon:te,color:"text-purple-500"},{value:"email",label:"Email",icon:ae,color:"text-red-500"},{value:"slack",label:"Slack",icon:C,color:"text-pink-500"},{value:"discord",label:"Discord",icon:C,color:"text-indigo-500"},{value:"lua",label:"Lua",icon:le,color:"text-cyan-500"}],S=[{name:"Posts",events:["post_created","post_updated","post_deleted","post_published","post_unpublished","post_trashed","post_restored","post_scheduled","post_draft_saved","post_status_changed","post_slug_changed","post_title_changed","post_content_changed","post_excerpt_changed","post_featured_image_set","post_featured_image_removed","post_password_protected","post_visibility_changed","post_author_changed","post_format_changed"]},{name:"Pages",events:["page_created","page_updated","page_deleted","page_published","page_unpublished","page_trashed","page_restored","page_template_changed","page_parent_changed","page_order_changed","page_status_changed","page_slug_changed"]},{name:"Comments",events:["comment_created","comment_updated","comment_deleted","comment_approved","comment_unapproved","comment_marked_spam","comment_replied","comment_edited","comment_status_changed","comment_flagged","comment_reported"]},{name:"Users",events:["user_registered","user_created","user_updated","user_deleted","user_login","user_logout","user_login_failed","user_password_changed","user_password_reset_requested","user_password_reset_completed","user_email_changed","user_role_changed","user_profile_updated","user_avatar_changed","user_activated","user_deactivated","user_locked","user_unlocked","user_session_started","user_session_ended","user_2fa_enabled","user_2fa_disabled","user_api_key_created","user_api_key_revoked"]},{name:"Media",events:["media_uploaded","media_updated","media_deleted","media_attached","media_detached","media_cropped","media_resized","media_optimized","media_renamed","image_uploaded","image_edited","image_deleted","video_uploaded","video_processed","audio_uploaded","document_uploaded","media_folder_created","media_folder_deleted","media_moved","media_duplicated"]},{name:"Categories",events:["category_created","category_updated","category_deleted","category_merged","category_parent_changed","category_slug_changed","category_description_changed","post_category_added","post_category_removed"]},{name:"Tags",events:["tag_created","tag_updated","tag_deleted","tag_merged","tag_slug_changed","post_tag_added","post_tag_removed","tag_description_changed"]},{name:"Taxonomies",events:["taxonomy_created","taxonomy_updated","taxonomy_deleted","taxonomy_term_created","taxonomy_term_updated","taxonomy_term_deleted","taxonomy_term_assigned","taxonomy_term_unassigned"]},{name:"Themes",events:["theme_installed","theme_activated","theme_deactivated","theme_deleted","theme_updated","theme_customized","theme_settings_saved","theme_preview_started","theme_preview_ended","theme_exported","theme_imported"]},{name:"Plugins",events:["plugin_installed","plugin_activated","plugin_deactivated","plugin_deleted","plugin_updated","plugin_settings_saved","plugin_error","plugin_hook_registered","plugin_api_called"]},{name:"Menus",events:["menu_created","menu_updated","menu_deleted","menu_item_added","menu_item_updated","menu_item_deleted","menu_item_reordered","menu_location_assigned","menu_location_unassigned"]},{name:"Widgets",events:["widget_added","widget_updated","widget_removed","widget_reordered","sidebar_created","sidebar_updated","sidebar_deleted","widget_area_changed"]},{name:"Settings",events:["settings_updated","site_title_changed","site_description_changed","site_url_changed","admin_email_changed","timezone_changed","date_format_changed","time_format_changed","permalink_structure_changed","reading_settings_changed","writing_settings_changed","discussion_settings_changed","media_settings_changed","privacy_settings_changed"]},{name:"SEO",events:["seo_settings_updated","meta_title_changed","meta_description_changed","sitemap_generated","sitemap_updated","robots_txt_changed","canonical_url_changed","og_tags_updated","schema_markup_updated","redirect_created","redirect_deleted"]},{name:"Security",events:["security_scan_started","security_scan_completed","security_threat_detected","security_threat_resolved","firewall_rule_added","firewall_rule_removed","ip_blocked","ip_unblocked","brute_force_detected","suspicious_activity_detected","malware_detected","file_integrity_check","ssl_certificate_expiring","ssl_certificate_renewed"]},{name:"Backup",events:["backup_started","backup_completed","backup_failed","backup_restored","backup_deleted","backup_scheduled","backup_downloaded","backup_uploaded","auto_backup_triggered"]},{name:"Cache",events:["cache_cleared","cache_purged","page_cache_cleared","object_cache_cleared","cdn_cache_purged","cache_preload_started","cache_preload_completed"]},{name:"Database",events:["database_optimized","database_repaired","database_backup_created","database_restored","table_created","table_altered","table_dropped","query_slow_detected","database_connection_error","migration_started","migration_completed","migration_failed"]},{name:"Email",events:["email_sent","email_failed","email_queued","email_opened","email_clicked","email_bounced","email_unsubscribed","newsletter_sent","newsletter_scheduled","email_template_created","email_template_updated"]},{name:"Forms",events:["form_submitted","form_created","form_updated","form_deleted","form_entry_created","form_entry_updated","form_entry_deleted","form_entry_spam_detected","form_field_added","form_field_removed"]},{name:"E-commerce",events:["order_created","order_updated","order_completed","order_cancelled","order_refunded","order_shipped","order_delivered","payment_received","payment_failed","payment_refunded","cart_created","cart_updated","cart_abandoned","checkout_started","checkout_completed","product_created","product_updated","product_deleted","product_out_of_stock","product_back_in_stock","coupon_created","coupon_used","coupon_expired","subscription_created","subscription_renewed","subscription_cancelled","subscription_expired"]},{name:"API",events:["api_request_received","api_request_completed","api_request_failed","api_rate_limit_exceeded","api_key_created","api_key_deleted","api_key_rotated","webhook_sent","webhook_received","webhook_failed","oauth_token_issued","oauth_token_revoked","rest_endpoint_called","graphql_query_executed"]},{name:"System",events:["system_startup","system_shutdown","system_error","system_warning","cron_job_started","cron_job_completed","cron_job_failed","queue_job_started","queue_job_completed","queue_job_failed","maintenance_mode_enabled","maintenance_mode_disabled","update_available","update_installed","health_check_passed","health_check_failed","disk_space_low","memory_usage_high","cpu_usage_high"]},{name:"Scheduler",events:["schedule_minutely","schedule_every_5_minutes","schedule_every_10_minutes","schedule_every_15_minutes","schedule_every_30_minutes","schedule_hourly","schedule_every_2_hours","schedule_every_4_hours","schedule_every_6_hours","schedule_every_12_hours","schedule_daily","schedule_daily_midnight","schedule_daily_noon","schedule_weekly","schedule_weekly_monday","schedule_weekly_friday","schedule_monthly","schedule_monthly_first","schedule_monthly_last","schedule_quarterly","schedule_yearly"]},{name:"Analytics",events:["pageview","unique_visitor","session_started","session_ended","goal_completed","conversion_tracked","event_tracked","referrer_detected","search_performed","download_tracked","outbound_link_clicked","video_played","scroll_depth_reached"]},{name:"Content",events:["content_imported","content_exported","revision_created","revision_restored","revision_deleted","autosave_created","content_copied","content_moved","content_archived","content_unarchived","content_locked","content_unlocked"]},{name:"Multilingual",events:["translation_created","translation_updated","translation_deleted","language_added","language_removed","default_language_changed","content_synced","translation_missing"]},{name:"Membership",events:["membership_created","membership_upgraded","membership_downgraded","membership_cancelled","membership_expired","membership_renewed","access_granted","access_revoked","content_restricted","content_unlocked"]},{name:"Notifications",events:["notification_sent","notification_read","notification_dismissed","push_notification_sent","push_notification_clicked","alert_triggered","alert_resolved","announcement_created","announcement_published"]},{name:"Search",events:["search_query","search_no_results","search_index_updated","search_index_rebuilt","search_suggestion_clicked","search_filter_applied"]}],E={javascript:`// Function handler
// Available: event, context, fetch
async function handler(event, context) {
  console.log('Event received:', event.type);
  console.log('Event data:', event.data);

  // Your logic here

  return {
    success: true,
    message: 'Function executed successfully'
  };
}`,typescript:`// Function handler
// Available: event, context, fetch
interface Event {
  type: string;
  data: Record<string, unknown>;
  timestamp: string;
}

interface Context {
  functionId: string;
  executionId: string;
}

async function handler(event: Event, context: Context): Promise<{ success: boolean; message: string }> {
  console.log('Event received:', event.type);
  console.log('Event data:', event.data);

  // Your logic here

  return {
    success: true,
    message: 'Function executed successfully'
  };
}`,sql:`-- SQL function
-- Available variables: :event_type, :event_data, :user_id

-- Example: Log event to custom table
INSERT INTO custom_logs (event_type, event_data, created_at)
VALUES (:event_type, :event_data::jsonb, NOW());

-- Return result
SELECT 'Function executed successfully' as message;`,http_webhook:`{
  "url": "https://api.example.com/webhook",
  "method": "POST",
  "headers": {
    "Content-Type": "application/json",
    "Authorization": "Bearer YOUR_TOKEN"
  },
  "body": {
    "event": "{{event.type}}",
    "data": "{{event.data}}",
    "timestamp": "{{event.timestamp}}"
  }
}`,email:`{
  "to": ["admin@example.com"],
  "subject": "Event Notification: {{event.type}}",
  "body": "An event occurred:\\n\\nType: {{event.type}}\\nData: {{event.data}}\\nTime: {{event.timestamp}}",
  "from": "noreply@rustpress.io"
}`,slack:`{
  "webhook_url": "https://hooks.slack.com/services/YOUR/WEBHOOK/URL",
  "channel": "#notifications",
  "username": "RustPress Bot",
  "icon_emoji": ":zap:",
  "text": "Event: {{event.type}}",
  "attachments": [
    {
      "color": "#36a64f",
      "fields": [
        { "title": "Event Type", "value": "{{event.type}}", "short": true },
        { "title": "Timestamp", "value": "{{event.timestamp}}", "short": true }
      ]
    }
  ]
}`,discord:`{
  "webhook_url": "https://discord.com/api/webhooks/YOUR/WEBHOOK",
  "content": "**Event:** {{event.type}}",
  "embeds": [
    {
      "title": "Event Notification",
      "color": 5793266,
      "fields": [
        { "name": "Type", "value": "{{event.type}}", "inline": true },
        { "name": "Time", "value": "{{event.timestamp}}", "inline": true }
      ]
    }
  ]
}`,lua:`-- Lua function handler
-- Available: event, context

function handler(event, context)
  print("Event received: " .. event.type)

  -- Your logic here

  return {
    success = true,
    message = "Function executed successfully"
  }
end`};function ye(){const{id:c}=H(),T=J(),n=!c||c==="new",[F,R]=d.useState(!n),[b,v]=d.useState(!1),[f,k]=d.useState(!1),[i,g]=d.useState(null),[m,p]=d.useState("code"),[A,h]=d.useState([]),[x,O]=d.useState(new Set),[j,q]=d.useState(""),[a,s]=d.useState({name:"",slug:"",description:"",runtime:"javascript",code:E.javascript,status:"draft",trigger_events:[],hook_timing:"after",priority:10,config:{},timeout_ms:3e4,retry_count:0,retry_delay_ms:1e3});d.useEffect(()=>{L(),n||P()},[c]);const L=async()=>{try{const r=await(await fetch("/api/admin/functions/events/categories")).json();r.success&&r.data&&r.data.length>0?h(r.data):h(S)}catch(t){console.error("Failed to fetch event categories:",t),h(S)}},P=async()=>{try{const r=await(await fetch(`/api/admin/functions/${c}`)).json();r.success&&s(r.data)}catch(t){console.error("Failed to fetch function:",t)}finally{R(!1)}},D=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),I=t=>{s({...a,name:t,slug:n?D(t):a.slug})},z=t=>{s({...a,runtime:t,code:E[t]||""})},N=t=>{const r=new Set(a.trigger_events);r.has(t)?r.delete(t):r.add(t),s({...a,trigger_events:Array.from(r)})},B=t=>{const r=new Set(x);r.has(t)?r.delete(t):r.add(t),O(r)},M=t=>{const r=new Set(a.trigger_events);t.events.forEach(l=>r.add(l)),s({...a,trigger_events:Array.from(r)})},U=t=>{const r=new Set(a.trigger_events);t.events.forEach(l=>r.delete(l)),s({...a,trigger_events:Array.from(r)})},W=async()=>{v(!0);try{const t=n?"/api/admin/functions":`/api/admin/functions/${c}`,u=await(await fetch(t,{method:n?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();u.success?n&&T(`/functions/${u.data.id}/edit`):alert(u.error||"Failed to save function")}catch(t){console.error("Failed to save function:",t),alert("Failed to save function")}finally{v(!1)}},Y=async()=>{var t,r,l;k(!0),g(null);try{const _=await(await fetch(`/api/admin/functions/${c}/test`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_type:a.trigger_events[0]||"manual_trigger",event_data:{test:!0}})})).json();g({success:_.success&&((t=_.data)==null?void 0:t.status)==="success",output:(r=_.data)!=null&&r.output?JSON.stringify(_.data.output,null,2):void 0,error:((l=_.data)==null?void 0:l.error)||_.error})}catch{g({success:!1,error:"Failed to execute test"})}finally{k(!1)}},$=A.map(t=>({...t,events:t.events.filter(r=>r.toLowerCase().includes(j.toLowerCase()))})).filter(t=>t.events.length>0);return F?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{to:"/functions",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n?"Create Function":"Edit Function"}),!n&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a.slug})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!n&&e.jsxs("button",{onClick:Y,disabled:f,className:"btn btn-secondary flex items-center gap-2",children:[f?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}):e.jsx(ie,{className:"w-4 h-4"}),"Test"]}),e.jsxs("button",{onClick:W,disabled:b,className:"btn btn-primary flex items-center gap-2",children:[b?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(oe,{className:"w-4 h-4"}),"Save"]})]})]}),i&&e.jsx("div",{className:o("p-4 rounded-lg border",i.success?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[i.success?e.jsx(Q,{className:"w-5 h-5 text-green-500 mt-0.5"}):e.jsx(G,{className:"w-5 h-5 text-red-500 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:o("font-medium",i.success?"text-green-800 dark:text-green-200":"text-red-800 dark:text-red-200"),children:i.success?"Test passed!":"Test failed"}),i.output&&e.jsx("pre",{className:"mt-2 p-2 bg-white dark:bg-gray-800 rounded text-sm overflow-x-auto",children:i.output}),i.error&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i.error})]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(w,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:t=>I(t.target.value),placeholder:"My Function",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Slug"}),e.jsx("input",{type:"text",value:a.slug,onChange:t=>s({...a,slug:t.target.value}),placeholder:"my-function",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{value:a.description,onChange:t=>s({...a,description:t.target.value}),placeholder:"What does this function do?",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex -mb-px",children:[e.jsxs("button",{onClick:()=>p("code"),className:o("px-6 py-3 text-sm font-medium border-b-2 transition-colors",m==="code"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:[e.jsx(V,{className:"w-4 h-4 inline-block mr-2"}),"Code"]}),e.jsxs("button",{onClick:()=>p("triggers"),className:o("px-6 py-3 text-sm font-medium border-b-2 transition-colors",m==="triggers"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:[e.jsx(X,{className:"w-4 h-4 inline-block mr-2"}),"Triggers",a.trigger_events.length>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded-full",children:a.trigger_events.length})]}),e.jsxs("button",{onClick:()=>p("settings"),className:o("px-6 py-3 text-sm font-medium border-b-2 transition-colors",m==="settings"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"),children:[e.jsx(Z,{className:"w-4 h-4 inline-block mr-2"}),"Settings"]})]})}),e.jsxs("div",{className:"p-6",children:[m==="code"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Runtime"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:me.map(t=>e.jsxs("button",{onClick:()=>z(t.value),className:o("flex items-center gap-2 px-3 py-2 rounded-lg border transition-colors",a.runtime===t.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx(t.icon,{className:o("w-4 h-4",t.color)}),e.jsx("span",{className:"text-sm",children:t.label})]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Code"}),e.jsx("textarea",{value:a.code,onChange:t=>s({...a,code:t.target.value}),rows:20,className:"w-full px-4 py-3 font-mono text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-900 text-gray-100",spellCheck:!1})]})]}),m==="triggers"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:j,onChange:t=>q(t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.trigger_events.length>0&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Selected triggers:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.trigger_events.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-sm bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 rounded",children:[t,e.jsx("button",{onClick:()=>N(t),className:"hover:text-primary-800",children:e.jsx(w,{className:"w-3 h-3"})})]},t))})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:$.map(t=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("button",{onClick:()=>B(t.name),className:"w-full flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.name,e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",t.events.length,")"]})]}),x.has(t.name)?e.jsx(se,{className:"w-4 h-4 text-gray-400"}):e.jsx(de,{className:"w-4 h-4 text-gray-400"})]}),x.has(t.name)&&e.jsxs("div",{className:"px-4 pb-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex gap-2 py-2",children:[e.jsx("button",{onClick:()=>M(t),className:"text-xs text-primary-600 hover:text-primary-700",children:"Select all"}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("button",{onClick:()=>U(t),className:"text-xs text-gray-500 hover:text-gray-700",children:"Deselect all"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-1",children:t.events.map(r=>e.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.trigger_events.includes(r),onChange:()=>N(r),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:r})]},r))})]})]},t.name))})]}),m==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Execution Timing"}),e.jsx("div",{className:"space-y-2",children:ce.map(t=>e.jsxs("label",{className:o("flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors",a.hook_timing===t.value?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"radio",name:"hook_timing",value:t.value,checked:a.hook_timing===t.value,onChange:r=>s({...a,hook_timing:r.target.value}),className:"mt-1 text-primary-600 focus:ring-primary-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t.label}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.description})]})]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priority"}),e.jsx("input",{type:"number",value:a.priority,onChange:t=>s({...a,priority:parseInt(t.target.value)||10}),min:1,max:100,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Lower numbers run first (1-100, default: 10)"})]}),e.jsx("hr",{className:"border-gray-200 dark:border-gray-700"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Timeout (ms)"}),e.jsx("input",{type:"number",value:a.timeout_ms,onChange:t=>s({...a,timeout_ms:parseInt(t.target.value)||3e4}),min:1e3,max:3e5,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum execution time (1-300 seconds)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Retry Count"}),e.jsx("input",{type:"number",value:a.retry_count,onChange:t=>s({...a,retry_count:parseInt(t.target.value)||0}),min:0,max:10,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Number of retry attempts on failure (0-10)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Retry Delay (ms)"}),e.jsx("input",{type:"number",value:a.retry_delay_ms,onChange:t=>s({...a,retry_delay_ms:parseInt(t.target.value)||1e3}),min:100,max:6e4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Delay between retries (100ms - 60s)"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Status"}),e.jsxs("select",{value:a.status,onChange:t=>s({...a,status:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a.status==="active"?"Function will be executed when triggered":a.status==="inactive"?"Function is paused and will not execute":"Function is in draft mode"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Quick Info"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Runtime"}),e.jsx("dd",{className:"text-gray-900 dark:text-white capitalize",children:a.runtime.replace("_"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Timing"}),e.jsx("dd",{className:"text-gray-900 dark:text-white capitalize",children:a.hook_timing==="both"?"Before & After":a.hook_timing})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Priority"}),e.jsx("dd",{className:"text-gray-900 dark:text-white",children:a.priority})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Triggers"}),e.jsxs("dd",{className:"text-gray-900 dark:text-white",children:[a.trigger_events.length," events"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Timeout"}),e.jsxs("dd",{className:"text-gray-900 dark:text-white",children:[(a.timeout_ms/1e3).toFixed(0),"s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-gray-500",children:"Retries"}),e.jsx("dd",{className:"text-gray-900 dark:text-white",children:a.retry_count})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-200 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:"Check out our documentation for examples and best practices."}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("a",{href:"#",className:"block text-blue-600 hover:text-blue-700",children:"Function Examples"}),e.jsx("a",{href:"#",className:"block text-blue-600 hover:text-blue-700",children:"Event Reference"}),e.jsx("a",{href:"#",className:"block text-blue-600 hover:text-blue-700",children:"Runtime Documentation"})]})]})]})]})]})}export{ye as default};
