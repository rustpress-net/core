import{r as i,j as e,ap as F,aH as D,a1 as f,u as w,q as y,a2 as W,b as X,a4 as ee,t as te,g as ae}from"./index-CyAWf64w.js";import{C as E}from"./chart-no-axes-column-CWcn5MN2.js";import{C as v}from"./copy-lfaF7_L0.js";import{R as _}from"./refresh-cw-Bhj-45gi.js";import{H as se}from"./hard-drive-r9Wu_P_Z.js";const re="/api",u=`${re}/admin/dbmanager/v1`;function oe(){const[g,O]=i.useState("statistics"),[d,c]=i.useState(!1),[S,n]=i.useState(null),[C,j]=i.useState(null),[B,q]=i.useState([]),[r,T]=i.useState(""),[a,I]=i.useState(null),[P,A]=i.useState([]),[N,z]=i.useState(""),[x,k]=i.useState({include_data:!0,include_indexes:!0,include_constraints:!0,include_triggers:!1}),[h,$]=i.useState(null),[l,b]=i.useState({strategy:"RANGE",column:"",partitions:[{name:"",bounds:""}]});i.useEffect(()=>{R()},[]);const R=async()=>{try{const t=await fetch(`${u}/tables`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(t.ok){const s=await t.json();s.success&&s.data&&(q(s.data),s.data.length>0&&!r&&T(s.data[0].name))}}catch(t){console.error("Failed to fetch tables:",t)}},H=async()=>{if(r){c(!0),n(null);try{const s=await(await fetch(`${u}/tables/${r}/statistics`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}})).json();s.success?I(s.data):n(s.error||"Failed to fetch statistics")}catch{n("Failed to fetch table statistics")}finally{c(!1)}}},M=async()=>{if(r){c(!0),n(null);try{const s=await(await fetch(`${u}/tables/${r}/index-recommendations`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}})).json();s.success?A(s.data||[]):n(s.error||"Failed to fetch recommendations")}catch{n("Failed to fetch index recommendations")}finally{c(!1)}}},G=async()=>{if(!r||!N.trim()){n("Please enter a target table name");return}c(!0),n(null),j(null);try{const s=await(await fetch(`${u}/tables/${r}/clone`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({target_table:N,...x})})).json();s.success?(j(`Table "${r}" cloned to "${N}" successfully!`),z(""),await R()):n(s.error||"Failed to clone table")}catch{n("Failed to clone table")}finally{c(!1)}},L=async()=>{if(r){c(!0),n(null);try{const s=await(await fetch(`${u}/tables/${r}/partitions`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")||""}`}})).json();s.success?$(s.data):n(s.error||"Failed to fetch partition info")}catch{n("Failed to fetch partition info")}finally{c(!1)}}},J=async()=>{if(!r||!l.column){n("Please fill in all partition details");return}c(!0),n(null),j(null);try{const s=await(await fetch(`${u}/tables/${r}/partitions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({strategy:l.strategy,partition_column:l.column,partitions:l.partitions.filter(m=>m.name&&m.bounds)})})).json();s.success?(j("Partitions created successfully!"),await L()):n(s.error||"Failed to create partitions")}catch{n("Failed to create partitions")}finally{c(!1)}},U=t=>{navigator.clipboard.writeText(t)},o=t=>t.toLocaleString(),Q=()=>a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Table Size"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.table_size})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Index Size"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.index_size})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Size"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a.total_size})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Row Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Rows"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o(a.total_rows)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Live Rows"}),e.jsx("p",{className:"text-xl font-semibold text-green-600",children:o(a.live_rows)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Dead Rows"}),e.jsx("p",{className:y("text-xl font-semibold",a.dead_rows>a.live_rows*.1?"text-red-600":"text-gray-900 dark:text-white"),children:o(a.dead_rows)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Bloat Ratio"}),e.jsxs("p",{className:y("text-xl font-semibold",a.bloat_ratio>20?"text-red-600":a.bloat_ratio>10?"text-yellow-600":"text-green-600"),children:[a.bloat_ratio.toFixed(1),"%"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Scan Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sequential Scans"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o(a.seq_scan)}),e.jsxs("p",{className:"text-xs text-gray-400",children:[o(a.seq_tup_read)," rows read"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Index Scans"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o(a.idx_scan)}),e.jsxs("p",{className:"text-xs text-gray-400",children:[o(a.idx_tup_fetch)," rows fetched"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Index Usage"}),e.jsxs("p",{className:y("text-xl font-semibold",a.idx_scan>a.seq_scan?"text-green-600":a.idx_scan>0?"text-yellow-600":"text-red-600"),children:[a.seq_scan+a.idx_scan>0?(a.idx_scan/(a.seq_scan+a.idx_scan)*100).toFixed(1):"0","%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"DML Operations"}),e.jsxs("p",{className:"text-xs text-gray-400",children:["INS: ",o(a.n_tup_ins)," | UPD: ",o(a.n_tup_upd)," | DEL: ",o(a.n_tup_del)]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:[e.jsx(X,{className:"w-4 h-4 inline mr-2"}),"Maintenance History"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Vacuum"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.last_vacuum?new Date(a.last_vacuum).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Autovacuum"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.last_autovacuum?new Date(a.last_autovacuum).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Analyze"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.last_analyze?new Date(a.last_analyze).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Last Autoanalyze"}),e.jsx("p",{className:"text-gray-900 dark:text-white",children:a.last_autoanalyze?new Date(a.last_autoanalyze).toLocaleString():"Never"})]})]})]})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(E,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a table and click Refresh to view statistics"})]}),V=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:M,disabled:d||!r,className:"btn btn-primary",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"Analyze Indexes"]}),P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-4 text-green-500"}),e.jsx("p",{children:"No index recommendations"}),e.jsx("p",{className:"text-sm",children:"Your table indexes appear to be optimized"})]}):e.jsx("div",{className:"space-y-4",children:P.map((t,s)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:y("px-2 py-0.5 rounded text-xs font-medium",t.estimated_improvement==="Significant"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":t.estimated_improvement==="Moderate"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:[t.estimated_improvement," Impact"]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.recommendation})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:t.reason}),t.column_name&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Column: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:t.column_name})]}),t.create_statement&&e.jsx("pre",{className:"mt-2 text-xs font-mono bg-gray-50 dark:bg-gray-700/50 p-2 rounded overflow-x-auto",children:t.create_statement})]}),t.create_statement&&e.jsx("button",{onClick:()=>U(t.create_statement),className:"btn btn-secondary btn-sm",children:e.jsx(v,{className:"w-4 h-4"})})]})},s))})]}),Y=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Clone Table"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Source Table"}),e.jsx("p",{className:"text-lg font-semibold text-primary-600",children:r||"No table selected"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target Table Name"}),e.jsx("input",{type:"text",value:N,onChange:t=>z(t.target.value),placeholder:`${r}_copy`,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Options"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.include_data,onChange:t=>k({...x,include_data:t.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Data"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.include_indexes,onChange:t=>k({...x,include_indexes:t.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Indexes"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.include_constraints,onChange:t=>k({...x,include_constraints:t.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Constraints"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.include_triggers,onChange:t=>k({...x,include_triggers:t.target.checked}),className:"rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include Triggers"})]})]})]}),e.jsxs("button",{onClick:G,disabled:d||!r||!N.trim(),className:"btn btn-primary",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Clone Table"]})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium",children:"About Table Cloning"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-blue-600 dark:text-blue-400",children:[e.jsx("li",{children:"Creates an exact copy of the table structure"}),e.jsx("li",{children:"Optionally copies all data to the new table"}),e.jsx("li",{children:"Can include or exclude indexes, constraints, and triggers"}),e.jsx("li",{children:"The new table will have a separate OID and storage"})]})]})]})})]}),Z=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:L,disabled:d||!r,className:"btn btn-secondary",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"Refresh Partition Info"]}),h?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:[e.jsx(w,{className:"w-4 h-4 inline mr-2"}),"Partition Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Strategy:"})," ",e.jsx("span",{className:"font-medium",children:h.partition_strategy})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Expression:"})," ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-1 rounded",children:h.partition_expression})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-500",children:"Partitions:"})," ",e.jsx("span",{className:"font-medium",children:h.num_partitions})]})]}),h.partition_bounds.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Partition Bounds"}),e.jsx("div",{className:"space-y-1",children:h.partition_bounds.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 dark:bg-gray-700/50 px-3 py-2 rounded",children:[e.jsx("span",{className:"font-mono",children:t.name}),e.jsx("span",{className:"text-gray-500",children:t.bounds})]},s))})]})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-4",children:"Create Partitioned Table"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Partition Strategy"}),e.jsxs("select",{value:l.strategy,onChange:t=>b({...l,strategy:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"RANGE",children:"RANGE"}),e.jsx("option",{value:"LIST",children:"LIST"}),e.jsx("option",{value:"HASH",children:"HASH"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Partition Column"}),e.jsx("input",{type:"text",value:l.column,onChange:t=>b({...l,column:t.target.value}),placeholder:"e.g., created_at",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Partitions"}),e.jsxs("div",{className:"space-y-2",children:[l.partitions.map((t,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t.name,onChange:m=>{const p=[...l.partitions];p[s].name=m.target.value,b({...l,partitions:p})},placeholder:"Partition name",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("input",{type:"text",value:t.bounds,onChange:m=>{const p=[...l.partitions];p[s].bounds=m.target.value,b({...l,partitions:p})},placeholder:"Bounds (e.g., FROM ('2024-01-01') TO ('2024-02-01'))",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),e.jsx("button",{onClick:()=>{const m=l.partitions.filter((p,K)=>K!==s);b({...l,partitions:m})},className:"btn btn-danger btn-sm",disabled:l.partitions.length<=1,children:e.jsx(te,{className:"w-4 h-4"})})]},s)),e.jsxs("button",{onClick:()=>b({...l,partitions:[...l.partitions,{name:"",bounds:""}]}),className:"btn btn-secondary btn-sm",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Add Partition"]})]})]}),e.jsxs("button",{onClick:J,disabled:d||!r||!l.column,className:"btn btn-primary",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Create Partitions"]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("p",{className:"font-medium",children:"Important Notes"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-yellow-600 dark:text-yellow-400",children:[e.jsx("li",{children:"Partitioning requires PostgreSQL 10+"}),e.jsx("li",{children:"Existing data must be migrated manually"}),e.jsx("li",{children:"The partition column cannot be changed after creation"}),e.jsx("li",{children:"Consider your query patterns when choosing a partition strategy"})]})]})]})})]});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Table Advanced Tools"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Statistics, index optimization, cloning, and partitioning"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Table"}),e.jsxs("select",{value:r,onChange:t=>{T(t.target.value),I(null),A([]),$(null)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a table..."}),B.map(t=>e.jsxs("option",{value:t.name,children:[t.name," (",t.rows," rows, ",t.size,")"]},t.name))]})]}),S&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-3",children:[e.jsx(F,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-700 dark:text-red-300",children:S}),e.jsx("button",{onClick:()=>n(null),className:"ml-auto text-red-500 hover:text-red-700",children:"×"})]}),C&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:C}),e.jsx("button",{onClick:()=>j(null),className:"ml-auto text-green-500 hover:text-green-700",children:"×"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex -mb-px",children:[{id:"statistics",label:"Statistics",icon:E},{id:"indexes",label:"Index Recommendations",icon:f},{id:"clone",label:"Clone Table",icon:v},{id:"partitions",label:"Partitions",icon:w}].map(t=>e.jsxs("button",{onClick:()=>O(t.id),className:y("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 -mb-px transition-colors",g===t.id?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[e.jsx(t.icon,{className:"w-4 h-4"}),t.label]},t.id))})}),e.jsxs("div",{className:"p-6",children:[d&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(_,{className:"w-6 h-6 animate-spin text-primary-500"}),e.jsx("span",{className:"ml-2 text-gray-500",children:"Loading..."})]}),!d&&g==="statistics"&&Q(),!d&&g==="indexes"&&V(),!d&&g==="clone"&&Y(),!d&&g==="partitions"&&Z(),g==="statistics"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:H,disabled:d||!r,className:"btn btn-secondary",children:[e.jsx(_,{className:y("w-4 h-4 mr-2",d&&"animate-spin")}),"Refresh Statistics"]})})]})]})]})}export{oe as default};
