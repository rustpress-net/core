import{o as se,Y as ne,aB as ie,Z as oe,r as y,j as a,k as U,l as ce,aC as de,au as le,n as ge,aD as ue,aE as me,a2 as he,$ as ye,ab as xe,E as pe,t as be}from"./index-CyAWf64w.js";import{b as o}from"./client-TYy9hZMt.js";import{R as N}from"./refresh-cw-Bhj-45gi.js";import{S as fe}from"./save-DWrBfmup.js";import{K as we}from"./key-D26yMelS.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=se("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),c="/api/plugins/rustanalytics";async function C(e){const t=await o.get(`${c}/overview`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function O(){const e=await o.get(`${c}/realtime`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function S(e){const t=await o.get(`${c}/traffic`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function M(e){const t=await o.get(`${c}/sources`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function L(e){const t=await o.get(`${c}/pages`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function F(e){const t=await o.get(`${c}/geo`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function ke(e){const t=await o.get(`${c}/audience`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function je(e){const t=await o.get(`${c}/acquisition`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function G(e){const t=await o.get(`${c}/acquisition/channels`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Ne(e){const t=await o.get(`${c}/behavior`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Ce(e){const t=await o.get(`${c}/conversions/goals`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Se(e){const t=await o.get(`${c}/conversions/multi-channel`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Le(e){const t=await o.get(`${c}/conversions/attribution`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Ee(e){const t=await o.get(`${c}/ecommerce`,{params:e});if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Re(){const e=await o.get(`${c}/reports`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function De(e){const t=await o.get(`${c}/reports/${e}`);if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Ae(e){const t=await o.post(`${c}/reports`,e);if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Te(e,t){const r=await o.put(`${c}/reports/${e}`,t);if(!r.data.success)throw new Error(r.data.error);return r.data.data}async function Ie(e){const t=await o.delete(`${c}/reports/${e}`);if(!t.data.success)throw new Error(t.data.error)}async function $e(e){const t=await o.post(`${c}/reports/${e}/run`);if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function Pe(){const e=await o.get(`${c}/settings`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function We(e){const t=await o.put(`${c}/settings`,e);if(!t.data.success)throw new Error(t.data.error);return t.data.data}async function qe(){const e=await o.post(`${c}/settings/test-connection`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function Ue(){const e=await o.get(`${c}/settings/properties`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function Oe(){const e=await o.post(`${c}/sync`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function Me(){const e=await o.get(`${c}/sync/status`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}async function Fe(){const e=await o.post(`${c}/cache/clear`);if(!e.data.success)throw new Error(e.data.error)}async function Ge(){const e=await o.get(`${c}/cache/stats`);if(!e.data.success)throw new Error(e.data.error);return e.data.data}const g=e=>({dateRange:e.dateRange,startDate:e.startDate||void 0,endDate:e.endDate||void 0,compare:e.compareEnabled}),ze=ne()(ie(oe((e,t)=>({overview:null,realtime:null,trafficData:[],trafficSources:[],topPages:[],geoData:[],channels:[],audience:null,acquisition:null,behavior:null,conversions:null,ecommerce:null,settings:null,connectionStatus:null,availableProperties:[],reports:[],currentReport:null,reportResult:null,syncStatus:null,cacheStats:null,isLoading:!1,isRealtimeLoading:!1,isSyncing:!1,error:null,dateRange:"last7days",startDate:null,endDate:null,compareEnabled:!1,activeTab:"overview",lastOverviewUpdate:null,lastRealtimeUpdate:null,setDateRange:(r,s,d)=>{e({dateRange:r,startDate:s||null,endDate:d||null}),t().refreshAllData()},setCompareEnabled:r=>{e({compareEnabled:r}),t().fetchOverview(!0)},setActiveTab:r=>e({activeTab:r}),clearError:()=>e({error:null}),fetchOverview:async(r=!1)=>{const s=t();if(!r&&s.lastOverviewUpdate){const d=new Date(s.lastOverviewUpdate);if(new Date().getTime()-d.getTime()<300*1e3)return}e({isLoading:!0,error:null});try{const d=await C(g(s));e({overview:d,lastOverviewUpdate:new Date().toISOString(),isLoading:!1})}catch(d){e({error:d.message,isLoading:!1})}},fetchRealtime:async()=>{e({isRealtimeLoading:!0});try{const r=await O();e({realtime:r,lastRealtimeUpdate:new Date().toISOString(),isRealtimeLoading:!1})}catch(r){e({error:r.message,isRealtimeLoading:!1})}},fetchTrafficData:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await S(g(r));e({trafficData:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchTrafficSources:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await M(g(r));e({trafficSources:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchTopPages:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await L(g(r));e({topPages:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchGeoData:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await F(g(r));e({geoData:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchChannels:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await G(g(r));e({channels:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchAudience:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await ke(g(r));e({audience:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchAcquisition:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await je(g(r));e({acquisition:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchBehavior:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await Ne(g(r));e({behavior:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchConversions:async()=>{const r=t();e({isLoading:!0,error:null});try{const[s,d,m]=await Promise.all([Ce(g(r)),Se(g(r)),Le(g(r))]);e({conversions:{goals:s,multiChannel:d,attribution:m,ecommerce:t().ecommerce},isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchEcommerce:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=await Ee(g(r));e({ecommerce:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},fetchSettings:async()=>{e({isLoading:!0,error:null});try{const r=await Pe();e({settings:r,isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},updateSettings:async r=>{e({isLoading:!0,error:null});try{const s=await We(r);e({settings:s,isLoading:!1})}catch(s){throw e({error:s.message,isLoading:!1}),s}},testConnection:async()=>{e({isLoading:!0,error:null});try{const r=await qe();e({connectionStatus:r,isLoading:!1})}catch(r){e({connectionStatus:{success:!1,error:r.message},error:r.message,isLoading:!1})}},fetchAvailableProperties:async()=>{e({isLoading:!0,error:null});try{const r=await Ue();e({availableProperties:r,isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},fetchReports:async()=>{e({isLoading:!0,error:null});try{const r=await Re();e({reports:r,isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},fetchReport:async r=>{e({isLoading:!0,error:null});try{const s=await De(r);e({currentReport:s,isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},createReport:async r=>{e({isLoading:!0,error:null});try{const s=await Ae(r);e(d=>({reports:[...d.reports,s],currentReport:s,isLoading:!1}))}catch(s){throw e({error:s.message,isLoading:!1}),s}},updateReport:async(r,s)=>{e({isLoading:!0,error:null});try{const d=await Te(r,s);e(m=>({reports:m.reports.map(h=>h.id===r?d:h),currentReport:d,isLoading:!1}))}catch(d){throw e({error:d.message,isLoading:!1}),d}},deleteReport:async r=>{e({isLoading:!0,error:null});try{await Ie(r),e(s=>{var d;return{reports:s.reports.filter(m=>m.id!==r),currentReport:((d=s.currentReport)==null?void 0:d.id)===r?null:s.currentReport,isLoading:!1}})}catch(s){throw e({error:s.message,isLoading:!1}),s}},runReport:async r=>{e({isLoading:!0,error:null});try{const s=await $e(r);e({reportResult:s,isLoading:!1})}catch(s){throw e({error:s.message,isLoading:!1}),s}},syncData:async()=>{e({isSyncing:!0,error:null});try{await Oe(),await t().fetchSyncStatus(),e({isSyncing:!1}),await t().refreshAllData()}catch(r){throw e({error:r.message,isSyncing:!1}),r}},fetchSyncStatus:async()=>{try{const r=await Me();e({syncStatus:r})}catch(r){e({error:r.message})}},clearCache:async()=>{e({isLoading:!0,error:null});try{await Fe(),e({isLoading:!1}),await t().refreshAllData()}catch(r){throw e({error:r.message,isLoading:!1}),r}},fetchCacheStats:async()=>{try{const r=await Ge();e({cacheStats:r})}catch(r){e({error:r.message})}},refreshAllData:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=g(r),[d,m,h,p,v,k]=await Promise.all([C(s),S(s),M(s),L(s),F(s),G(s)]);e({overview:d,trafficData:m,trafficSources:h,topPages:p,geoData:v,channels:k,lastOverviewUpdate:new Date().toISOString(),isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},loadDashboardData:async()=>{const r=t();e({isLoading:!0,error:null});try{const s=g(r),[d,m,h,p]=await Promise.all([C(s),O(),S(s),L({...s,limit:10})]);e({overview:d,realtime:m,trafficData:h,topPages:p,lastOverviewUpdate:new Date().toISOString(),lastRealtimeUpdate:new Date().toISOString(),isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}}}),{name:"rustpress-analytics-store",partialize:e=>({dateRange:e.dateRange,compareEnabled:e.compareEnabled,activeTab:e.activeTab})}),{name:"AnalyticsStore"})),He=()=>{const{settings:e,connectionStatus:t,syncStatus:r,cacheStats:s,availableProperties:d,isLoading:m,error:h,fetchSettings:p,updateSettings:v,testConnection:k,fetchAvailableProperties:Je,syncData:z,clearCache:J,fetchSyncStatus:E,fetchCacheStats:R,clearError:D}=ze(),[i,A]=y.useState({gaPropertyId:"",gaMeasurementId:"",serviceAccountJson:"",enableTracking:!0,trackLoggedInUsers:!0,trackAdminUsers:!1,anonymizeIp:!0,respectDnt:!0,cookieConsentRequired:!0,enhancedLinkAttribution:!1,enhancedEcommerce:!1,defaultDateRange:"last7days",showRealtimeWidget:!0,showTrafficWidget:!0,showToppagesWidget:!0,showAcquisitionWidget:!0,reportEmailEnabled:!1,reportEmailRecipients:"",reportFrequency:"weekly",gdprCompliant:!0,ccpaCompliant:!1}),[x,X]=y.useState("configuration"),[f,B]=y.useState(!1),[T,I]=y.useState(!1),[$,P]=y.useState(!1),[K,j]=y.useState(!1);y.useEffect(()=>{p(),E(),R()},[p,E,R]),y.useEffect(()=>{var n;e&&A({gaPropertyId:e.gaPropertyId||"",gaMeasurementId:e.gaMeasurementId||"",serviceAccountJson:e.serviceAccountJson||"",enableTracking:e.enableTracking??!0,trackLoggedInUsers:e.trackLoggedInUsers??!0,trackAdminUsers:e.trackAdminUsers??!1,anonymizeIp:e.anonymizeIp??!0,respectDnt:e.respectDnt??!0,cookieConsentRequired:e.cookieConsentRequired??!0,enhancedLinkAttribution:e.enhancedLinkAttribution??!1,enhancedEcommerce:e.enhancedEcommerce??!1,defaultDateRange:e.defaultDateRange||"last7days",showRealtimeWidget:e.showRealtimeWidget??!0,showTrafficWidget:e.showTrafficWidget??!0,showToppagesWidget:e.showToppagesWidget??!0,showAcquisitionWidget:e.showAcquisitionWidget??!0,reportEmailEnabled:e.reportEmailEnabled??!1,reportEmailRecipients:((n=e.reportEmailRecipients)==null?void 0:n.join(", "))||"",reportFrequency:e.reportFrequency||"weekly",gdprCompliant:e.gdprCompliant??!0,ccpaCompliant:e.ccpaCompliant??!1})},[e]);const l=(n,b)=>{A(w=>({...w,[n]:b})),j(!1)},Y=async n=>{var w;const b=(w=n.target.files)==null?void 0:w[0];if(b){const W=new FileReader;W.onload=re=>{var q;const te=(q=re.target)==null?void 0:q.result;l("serviceAccountJson",te)},W.readAsText(b)}},_=async()=>{I(!0);try{await k()}finally{I(!1)}},H=async()=>{P(!0),D();try{await v({gaPropertyId:i.gaPropertyId,gaMeasurementId:i.gaMeasurementId,serviceAccountJson:i.serviceAccountJson||void 0,enableTracking:i.enableTracking,trackLoggedInUsers:i.trackLoggedInUsers,trackAdminUsers:i.trackAdminUsers,anonymizeIp:i.anonymizeIp,respectDnt:i.respectDnt,cookieConsentRequired:i.cookieConsentRequired,enhancedLinkAttribution:i.enhancedLinkAttribution,enhancedEcommerce:i.enhancedEcommerce,defaultDateRange:i.defaultDateRange,showRealtimeWidget:i.showRealtimeWidget,showTrafficWidget:i.showTrafficWidget,showToppagesWidget:i.showToppagesWidget,showAcquisitionWidget:i.showAcquisitionWidget,reportEmailEnabled:i.reportEmailEnabled,reportEmailRecipients:i.reportEmailRecipients.split(",").map(n=>n.trim()).filter(Boolean),reportFrequency:i.reportFrequency,gdprCompliant:i.gdprCompliant,ccpaCompliant:i.ccpaCompliant}),j(!0),setTimeout(()=>j(!1),3e3)}finally{P(!1)}},Q=async()=>{try{await z()}catch{}},V=async()=>{if(window.confirm("Are you sure you want to clear the analytics cache? This will force a refresh of all data."))try{await J()}catch{}},Z=[{id:"configuration",label:"Configuration",icon:we},{id:"tracking",label:"Tracking",icon:le},{id:"dashboard",label:"Dashboard",icon:ge},{id:"reports",label:"Reports",icon:ue},{id:"privacy",label:"Privacy",icon:me},{id:"data",label:"Data Management",icon:he}],ee=[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"last7days",label:"Last 7 Days"},{value:"last14days",label:"Last 14 Days"},{value:"last30days",label:"Last 30 Days"},{value:"last90days",label:"Last 90 Days"},{value:"thismonth",label:"This Month"},{value:"lastmonth",label:"Last Month"},{value:"thisyear",label:"This Year"}],ae=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Google Analytics Settings"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure your Google Analytics integration and preferences."})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[K&&a.jsxs("span",{className:"flex items-center text-green-600 dark:text-green-400 text-sm",children:[a.jsx(U,{className:"w-4 h-4 mr-1"}),"Saved successfully"]}),a.jsxs("button",{onClick:H,disabled:$||m,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[$?a.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(fe,{className:"w-4 h-4 mr-2"}),"Save Settings"]})]})]})})}),h&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border-b border-red-200 dark:border-red-800",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:a.jsxs("div",{className:"flex items-center text-red-700 dark:text-red-400",children:[a.jsx(ce,{className:"w-5 h-5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm",children:h}),a.jsx("button",{onClick:D,className:"ml-auto text-red-500 hover:text-red-700",children:a.jsx(de,{className:"w-4 h-4"})})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex gap-8",children:[a.jsx("div",{className:"w-64 flex-shrink-0",children:a.jsx("nav",{className:"space-y-1 sticky top-8",children:Z.map(n=>{const b=n.icon;return a.jsxs("button",{onClick:()=>X(n.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${x===n.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx(b,{className:"w-5 h-5 mr-3"}),n.label]},n.id)})})}),a.jsxs("div",{className:"flex-1 space-y-6",children:[x==="configuration"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Google Analytics Configuration"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Connect your Google Analytics 4 property to start collecting data."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"GA4 Property ID"}),a.jsx("input",{type:"text",value:i.gaPropertyId,onChange:n=>l("gaPropertyId",n.target.value),placeholder:"properties/123456789",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Find this in Google Analytics Admin > Property Settings"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Measurement ID"}),a.jsx("input",{type:"text",value:i.gaMeasurementId,onChange:n=>l("gaMeasurementId",n.target.value),placeholder:"G-XXXXXXXXXX",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Used for client-side tracking. Find this in Data Streams settings."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service Account JSON Key"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("label",{className:"flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[a.jsx(ye,{className:"w-4 h-4 mr-2"}),"Upload JSON File",a.jsx("input",{type:"file",accept:".json",onChange:Y,className:"hidden"})]}),i.serviceAccountJson&&a.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center",children:[a.jsx(U,{className:"w-4 h-4 mr-1"}),"Key uploaded"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{value:i.serviceAccountJson,onChange:n=>l("serviceAccountJson",n.target.value),placeholder:'{"type": "service_account", ...}',rows:4,className:`w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm ${f?"":"text-security-disc"}`,style:f?{}:{WebkitTextSecurity:"disc"}}),a.jsx("button",{type:"button",onClick:()=>B(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:f?a.jsx(xe,{className:"w-4 h-4"}):a.jsx(pe,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Create a service account in Google Cloud Console and download the JSON key."})]}),d.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Property"}),a.jsxs("select",{value:i.gaPropertyId,onChange:n=>l("gaPropertyId",n.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a property..."}),d.map(n=>a.jsxs("option",{value:n.propertyId,children:[n.displayName," (",n.accountName,")"]},n.propertyId))]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Connection Status"}),t&&a.jsx("p",{className:`text-sm mt-1 ${t.success?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:t.success?`Connected to ${t.propertyName}`:t.error})]}),a.jsxs("button",{onClick:_,disabled:T||!i.gaPropertyId,className:"inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[T?a.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(ve,{className:"w-4 h-4 mr-2"}),"Test Connection"]})]})})]})]}),x==="tracking"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tracking Options"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure how visitor data is collected and processed."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(u,{label:"Enable Tracking",description:"Add Google Analytics tracking code to your site",checked:i.enableTracking,onChange:n=>l("enableTracking",n)}),a.jsx(u,{label:"Track Logged-in Users",description:"Include logged-in users in analytics data",checked:i.trackLoggedInUsers,onChange:n=>l("trackLoggedInUsers",n)}),a.jsx(u,{label:"Track Admin Users",description:"Include administrator visits in analytics",checked:i.trackAdminUsers,onChange:n=>l("trackAdminUsers",n)}),a.jsx(u,{label:"Anonymize IP Addresses",description:"Remove the last octet of visitor IP addresses",checked:i.anonymizeIp,onChange:n=>l("anonymizeIp",n)}),a.jsx(u,{label:"Respect Do Not Track",description:"Honor browser DNT settings and skip tracking",checked:i.respectDnt,onChange:n=>l("respectDnt",n)}),a.jsx(u,{label:"Require Cookie Consent",description:"Wait for user consent before setting cookies",checked:i.cookieConsentRequired,onChange:n=>l("cookieConsentRequired",n)}),a.jsx(u,{label:"Enhanced Link Attribution",description:"Track clicks on multiple links to the same URL",checked:i.enhancedLinkAttribution,onChange:n=>l("enhancedLinkAttribution",n)}),a.jsx(u,{label:"Enhanced E-commerce",description:"Enable advanced e-commerce tracking features",checked:i.enhancedEcommerce,onChange:n=>l("enhancedEcommerce",n)})]})]}),x==="dashboard"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Dashboard Preferences"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Customize your analytics dashboard experience."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Date Range"}),a.jsx("select",{value:i.defaultDateRange,onChange:n=>l("defaultDateRange",n.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(n=>a.jsx("option",{value:n.value,children:n.label},n.value))})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"Dashboard Widgets"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(u,{label:"Real-time Widget",description:"Show live visitor count on the dashboard",checked:i.showRealtimeWidget,onChange:n=>l("showRealtimeWidget",n)}),a.jsx(u,{label:"Traffic Widget",description:"Display traffic trends chart",checked:i.showTrafficWidget,onChange:n=>l("showTrafficWidget",n)}),a.jsx(u,{label:"Top Pages Widget",description:"Show most visited pages",checked:i.showToppagesWidget,onChange:n=>l("showToppagesWidget",n)}),a.jsx(u,{label:"Acquisition Widget",description:"Display traffic sources breakdown",checked:i.showAcquisitionWidget,onChange:n=>l("showAcquisitionWidget",n)})]})]})]})]}),x==="reports"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Report Settings"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure automated email reports."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(u,{label:"Email Reports",description:"Send periodic analytics reports via email",checked:i.reportEmailEnabled,onChange:n=>l("reportEmailEnabled",n)}),i.reportEmailEnabled&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Report Recipients"}),a.jsx("input",{type:"text",value:i.reportEmailRecipients,onChange:n=>l("reportEmailRecipients",n.target.value),placeholder:"email1@example.com, email2@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Separate multiple email addresses with commas"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Report Frequency"}),a.jsx("select",{value:i.reportFrequency,onChange:n=>l("reportFrequency",n.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ae.map(n=>a.jsx("option",{value:n.value,children:n.label},n.value))})]})]})]})]}),x==="privacy"&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Privacy & Compliance"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Configure privacy settings for regulatory compliance."})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(u,{label:"GDPR Compliance Mode",description:"Enable features for EU General Data Protection Regulation compliance",checked:i.gdprCompliant,onChange:n=>l("gdprCompliant",n)}),a.jsx(u,{label:"CCPA Compliance Mode",description:"Enable features for California Consumer Privacy Act compliance",checked:i.ccpaCompliant,onChange:n=>l("ccpaCompliant",n)}),a.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:[a.jsx("strong",{children:"Note:"})," Enabling compliance modes will automatically configure IP anonymization, cookie consent requirements, and data retention settings to meet regulatory standards."]})})]})]}),x==="data"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Data Synchronization"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Manage analytics data sync from Google Analytics."})]}),a.jsxs("div",{className:"p-6",children:[r&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Status"}),a.jsx("div",{className:`text-lg font-semibold ${r.isSyncing?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"}`,children:r.isSyncing?"Syncing...":"Idle"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Sync"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r.lastSync?new Date(r.lastSync).toLocaleString():"Never"})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Syncs"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r.totalSyncs})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Failed Syncs"}),a.jsx("div",{className:`text-lg font-semibold ${r.failedSyncs>0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:r.failedSyncs})]})]}),a.jsxs("button",{onClick:Q,disabled:m||(r==null?void 0:r.isSyncing),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(N,{className:`w-4 h-4 mr-2 ${r!=null&&r.isSyncing?"animate-spin":""}`}),r!=null&&r.isSyncing?"Syncing...":"Sync Now"]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cache Management"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Manage the analytics data cache."})]}),a.jsxs("div",{className:"p-6",children:[s&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cached Items"}),a.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[s.memoryEntries," / ",s.maxEntries]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cache Size"}),a.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[(s.memorySizeBytes/1024).toFixed(1)," KB"]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Expired"}),a.jsx("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:s.expiredEntries})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"TTL"}),a.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[s.cacheDurationMinutes," min"]})]})]}),a.jsxs("button",{onClick:V,disabled:m,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(be,{className:"w-4 h-4 mr-2"}),"Clear Cache"]})]})]})]})]})]})})]})},u=({label:e,description:t,checked:r,onChange:s})=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})]}),a.jsx("button",{type:"button",onClick:()=>s(!r),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${r?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:a.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${r?"translate-x-5":"translate-x-0"}`})})]});export{He as default};
